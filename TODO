todo for shell unit test

----
test error handling in runtestintestdir

----
redirect party

in runtests loop
redirect stdout of tests to fd3, stderr to fd4
print shut exitstatus to fd1
use real exitstatus to report error

just before main
catch errors from fd4 and fd2 and print to fd2
catch stdout from fd3 and print to fd1
catch exitstatus from fd1 and process

why the trouble?
actual exitstatus can be used to report error
unhandled errors can flow over fd2
shut exitstatus can flow over fd1

----
if error during runtest just bail out

----
printf with explicit format string to guard against accidental % expansion

----
test that pattern argument works with absolute and relative path

----
create mirror of actual test tree with pointers to enumerated testdirs

test tree:
tests/badger/test1
tests/mushroom/test2

shutdir:
test000001 (this is test/badger/test1)
test000002 (this is test/mushroom/test2)

mirrors (also in shutdir somehow):
tests/badger/test1 (pointer to test000001)
test/mushroom/test2 (pointer to test000002)

pointer as symlink? or just text in file?

----
read testnames from stdin

----
add option to always try to delete existing shutdir

----
when deciding whether existing shutdir is safe to delete
examine contents and look for files: tests pass fail

----
provide option to not create shutdir
work in temp directory instead

----
add option to allow no tests found to be no error

----
in output replace long paths with variables
for example
/home/lesmana/code/shellunittest/tests/shutdir/bla
replace with
$SHUTDIR/bla

----
add option to abort runtests loop if fail or error

----
allow exluding tests

----
provide option to show non executables which match given pattern
to help find tests which were mistakenly not marked executable

----
write help and readme

----
create logfile of entire stdout of shut

----
forced fail for tests which take longer than x seconds
use command timeout

----
provide options to fine tune output
example
--print-all-reports
--print-list-of-fail
--print-list-of-pass
--print-summary

----
allow pattern for line to begin printing output
example
--show-output=10 (show last 10 lines)
--show-output=diff (show lines after line containing diff)

----
specify in output if last x lines
example:
output (last 10 lines)

----
specify in output if empty
example
stderr: (empty)

----
recreate report from existing shutdir without rerunning tests
